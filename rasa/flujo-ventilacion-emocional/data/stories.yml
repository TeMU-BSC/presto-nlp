version: "2.0"

stories:

# ask first for primary emotion: 

  - story: happy path with positive emotion
    steps: 
      - intent: greet
      - action: utter_greet
      - intent: inform_sentiment
      - action: sentiment_form
      - slot_was_set:
          - sentiment: POS
      - action: utter_sentiment_POS

  - story: happy path with negative emotion
    steps: 
      - intent: greet
      - action: utter_greet
      - intent: inform_sentiment
      - action: sentiment_form
      - slot_was_set:
          - sentiment: NEG
      - action: utter_sentiment_NEG
      - checkpoint: user_give_emotion_NEG

  - story: happy path with neutral emotion
    steps: 
      - intent: greet
      - action: utter_greet
      - intent: inform_sentiment
      - action: sentiment_form
      - slot_was_set:
          - sentiment: NEU
      - action: utter_sentiment_NEU

### Intervencion y flecha:
  # - story: wrap_up_given_sentiment
  #   steps:
  #     - checkpoint: user_give_emotion_NEG
  #     - or: 
  #       - intent: alternat
  #       - intent: factual
  #     - action: utter_out_of_scope-wrap_up

  - story: wrap_up_given_sentiment
    steps:
      - or: 
        - intent: alternat
        - intent: out_of_scope-wrap_up
      - action: utter_out_of_scope-wrap_up
      - or: 
        - intent: alternat
        - intent: out_of_scope-wrap_up
      - action: utter_out_of_scope-wrap_up
      - or:
        - intent: alternat
        - intent: out_of_scope-wrap_up
      - action: utter_wrap_up_action

  - story: chatting distorsions_without negat emotion
    steps: 
      - or:
        - intent: sobregeneralizacion
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
      - action: utter_ventilacion_1
      - or:
        - intent: sobregeneralizacion
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
      - action: utter_ventilacion_2
      - checkpoint: distorsion_ready

  - story: chatting distorsions
    steps: 
      - checkpoint: user_give_emotion_NEG
      - or:
        - intent: sobregeneralizacion
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
      - action: utter_ventilacion_1
      - or:
        - intent: sobregeneralizacion
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
      - action: utter_ventilacion_2
      - checkpoint: distorsion_ready

  - story: intervencion_sobre
    steps:
      - checkpoint: distorsion_ready
      - intent: sobregeneralizacion
      - action: utter_intervencion_general
      - action: utter_intervencion_sobre

  - story: intervencion_etiquetado
    steps:
      - checkpoint: distorsion_ready
      - intent: etiquetado
      - action: utter_intervencion_general
      - action: utter_intervencion_etiquetado


  - story: intervencion_lectordementes
    steps:
      - checkpoint: distorsion_ready
      - intent: lectordementes
      - action: utter_intervencion_general
      - action: utter_intervencion_lectordementes

  - story: intervencion_adivinacion
    steps:
      - checkpoint: distorsion_ready
      - intent: adivinacion
      - action: utter_intervencion_general
      - action: utter_intervencion_adivinacion

  - story: intervencion_deberias
    steps:
      - checkpoint: distorsion_ready
      - intent: deberias
      - action: utter_intervencion_general
      - action: utter_intervencion_deberias

  - story: intervencion_catastrofismo
    steps:
      - checkpoint: distorsion_ready
      - intent: catastrofismo
      - action: utter_intervencion_general
      - action: utter_intervencion_catastrofismo

  - story: intervencion_pensamientoabsolutista
    steps:
      - checkpoint: distorsion_ready
      - intent: pensamientoabsolutista
      - action: utter_intervencion_general
      - action: utter_intervencion_pensamientoabsolutista


      #   - intent: sobregeneralizacion
      #   - intent: lectordementes
      #   - intent: pensamientoabsolutista
      #   - intent: etiquetado
      #   - intent: catastrofismo
      #   - intent: adivinacion
      #   - intent: deberias
      # - action: utter_intervention

    
  # - story: end_intervention
  #   steps:
  #   - checkpoint: end_intervention
  #   - or:
  #       - intent: ready
  #       - intent: thanks
  #       - intent: confirm
  #   - action: utter_youre_welcome

  - story: alert_non_emergency
    steps: 
    - intent: alert
    - action: utter_alert
    - intent: inform_sentiment
    - action: utter_sentiment_NEG

  - story: alert_emergency
    steps: 
    - intent: alert
    - action: utter_alert
    - intent: emergency
    - action: utter_emergency




