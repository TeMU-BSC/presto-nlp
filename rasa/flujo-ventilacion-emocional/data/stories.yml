version: "2.0"

stories:

# Emotion classification:

  - story: thanks
    steps: 
      - intent: thanks
      - action: utter_thanks 

  - story: EmotionClassification - positive emotion ## ok revisado
    steps:
      - intent: greet
      - action: utter_greet_ask_emotion
      - intent: inform_sentiment
      - action: sentiment_form
      - slot_was_set:
          - sentiment: POS
      - action: utter_sentiment_POS
      - action: utter_selector_POS
      - intent: confirm
      - action: utter_advice_POS
      - action: utter_advice_POS_finish

  - story: Emotion POS non advice ## ok revisado
    steps:
      - intent: greet
      - action: utter_greet_ask_emotion
      - intent: inform_sentiment
      - action: sentiment_form
      - slot_was_set:
          - sentiment: POS
      - action: utter_sentiment_POS
      - action: utter_selector_POS
      - intent: deny
      - action: utter_goodbye_nicemood


  - story: emotionclassification - positive distorsion # ok revisado
    steps:
      - slot_was_set:
          - sentiment: POS
      - or:
        - intent: nlu_fallback
        - intent: etiquetado
        - intent: sobregeneralizacion
      - action: utter_sentiment_POS
      - action: utter_selector_POS


  - story: EmotionClassification - negative emotion # ok revisado
    steps:
      - intent: greet
      - action: utter_greet_ask_emotion
      - intent: inform_sentiment
      - action: sentiment_form
      - slot_was_set:
          - sentiment: NEG
      - action: utter_sentiment_NEG
      - checkpoint: user_give_emotion_NEG

  - story: EmotionClassification - neutral emotion  # ok revisado
    steps:
      - intent: greet
      - action: utter_greet_ask_emotion
      - intent: inform_sentiment
      - action: sentiment_form
      - slot_was_set:
          - sentiment: NEU
      # - action: deactivate
      - action: utter_sentiment_NEU
      - checkpoint: user_give_emotion_NEU


### Inquiries non distortions family

  - story: non distorsion - negative emotion 
    steps:
    - checkpoint: user_give_emotion_NEG
    - intent: nlu_fallback
    # - or:
    - slot_was_set:
        - valorFamilia: valorFamilia
      # - slot_was_set:
      #     - valorSocial: valorSocial
      # - slot_was_set:
      #     - valorPareja: valorPareja
    - action: utter_ventilacion_nd_1
    - action: utter_selector_contar
    - intent: confirmcontar
    - action: utter_si_contar
    - intent: nlu_fallback
    # - action: utter_ventilacion_nd_feedback
    - action: utter_ventilacion_nd_final
    - action: utter_ventilacion_nd_opcional
  
  #--------------------------------------------------------
  - story: non distorsion - negative emotion 
    steps:
    - checkpoint: user_give_emotion_NEU
    - intent: nlu_fallback
    # - or:
    - slot_was_set:
        - valorFamilia: valorFamilia
      # - slot_was_set:
      #     - valorSocial: valorSocial
      # - slot_was_set:
      #     - valorPareja: valorPareja
    - action: utter_ventilacion_nd_1
    - action: utter_selector_contar
    - intent: confirmcontar
    - action: utter_si_contar
    - intent: nlu_fallback
    # - action: utter_ventilacion_nd_feedback
    - action: utter_ventilacion_nd_final
    - action: utter_ventilacion_nd_opcional


  - story: non distorsion - negative emotion - no contar
    steps:
    - checkpoint: user_give_emotion_NEG
    - intent: nlu_fallback
    # - or:
    - slot_was_set:
        - valorFamilia: valorFamilia
      # - slot_was_set:
      #     - valorSocial: valorSocial
      # - slot_was_set:
      #     - valorPareja: valorPareja
    - action: utter_ventilacion_nd_1
    - action: utter_selector_contar
    - intent: deny
    - action: utter_no_contar

#---------------------------
  - story: non distorsion - negative emotion - no contar
    steps:
    - checkpoint: user_give_emotion_NEU
    # - or:
    - slot_was_set:
        - valorFamilia: valorFamilia
      # - slot_was_set:
      #     - valorSocial: valorSocial
      # - slot_was_set:
      #     - valorPareja: valorPareja
    - action: utter_ventilacion_nd_1
    - action: utter_selector_contar
    - intent: deny
    - action: utter_no_contar


## Inquiries non distortions social

  - story: non distorsion - negative emotion 
    steps:
      - checkpoint: user_give_emotion_NEG
      - intent: nlu_fallback
      - slot_was_set:
          - valorSocial
      - action: utter_ventilacion_nd_1
      - action: utter_selector_contar
      - intent: confirm
      - action: utter_si_contar
      - intent: nlu_fallback
      # - action: utter_ventilacion_nd_feedback
      - action: utter_ventilacion_nd_final
      - action: utter_ventilacion_nd_opcional

#-------------------------------------------------------------
  - story: non distorsion - negative emotion 
    steps:
    - checkpoint: user_give_emotion_NEU
    - intent: nlu_fallback
    # - or:
    - slot_was_set:
        - valorSocial: valorSocial
      # - slot_was_set:
      #     - valorSocial: valorSocial
      # - slot_was_set:
      #     - valorPareja: valorPareja
    - action: utter_ventilacion_nd_1
    - action: utter_selector_contar
    - intent: confirmcontar
    - action: utter_si_contar
    - intent: nlu_fallback
    # - action: utter_ventilacion_nd_feedback
    - action: utter_ventilacion_nd_final
    - action: utter_ventilacion_nd_opcional
  


  - story: non distorsion -valorSocial- negative emotion - no contar
    steps:
      - checkpoint: user_give_emotion_NEG
      - intent: nlu_fallback
      - slot_was_set:
          - valorSocial
      - action: utter_ventilacion_nd_1
      - action: utter_selector_contar
      - intent: deny
      - action: utter_no_contar

#-----------------------------------------------------
  - story: non distorsion - neutral emotion - no contar
    steps:
    - checkpoint: user_give_emotion_NEU
    - intent: nlu_fallback
    # - or:
    - slot_was_set:
        - valorSocial: valorSocial
      # - slot_was_set:
      #     - valorSocial: valorSocial
      # - slot_was_set:
      #     - valorPareja: valorPareja
    - action: utter_ventilacion_nd_1
    - action: utter_selector_contar
    - intent: deny
    - action: utter_no_contar
### Inquiries non distortions pareja

  - story: non distorsion - negative emotion 
    steps:
      - checkpoint: user_give_emotion_NEG
      - intent: nlu_fallback
      - slot_was_set:
          - valorPareja
      - action: utter_ventilacion_nd_1
      - action: utter_selector_contar
      - intent: confirm
      - action: utter_si_contar
      - intent: nlu_fallback
      # - action: utter_ventilacion_nd_feedback
      - action: utter_ventilacion_nd_final
      - action: utter_ventilacion_nd_opcional

#----------------------------------------------------------
  - story: non distorsion - negative emotion 
    steps:
    - checkpoint: user_give_emotion_NEU
    - intent: nlu_fallback
    # - or:
    - slot_was_set:
        - valorPareja: valorPareja
      # - slot_was_set:
      #     - valorSocial: valorSocial
      # - slot_was_set:
      #     - valorPareja: valorPareja
    - action: utter_ventilacion_nd_1
    - action: utter_selector_contar
    - intent: confirmcontar
    - action: utter_si_contar
    - intent: nlu_fallback
    # - action: utter_ventilacion_nd_feedback
    - action: utter_ventilacion_nd_final
    - action: utter_ventilacion_nd_opcional

  - story: non distorsion - negative emotion 
    steps:
      - checkpoint: user_give_emotion_NEG
      - intent: nlu_fallback
      - slot_was_set:
          - valorPareja
      - action: utter_ventilacion_nd_1
      - action: utter_selector_contar
      - intent: deny
      - action: utter_no_contar

#-----------------------------------------------

  - story: non distorsion - negative emotion 
    steps:
      - checkpoint: user_give_emotion_NEU
      - slot_was_set:
          - valorPareja
      - action: utter_ventilacion_nd_1
      - action: utter_selector_contar
      - intent: deny
      - action: utter_no_contar
  


  # - story: non distorsion - positive emotion
  #   steps:
  #     - checkpoint: user_give_emotion_NEG
  #     - intent: nlu_fallback
  #     - slot_was_set:
  #         - sentiment: POS
  #     - action: utter_ventilacion_nd_1



### Distortions inquiries



  - story: chatting distorsions - two steps WITHOUT EMOTION INIT
    steps:
      # - action: sentiment_form
      - slot_was_set:
          - sentiment: NEG
      - or:
        - intent: sobregeneralizacion
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
      - action: utter_ventilacion_1
      # - action: sentiment_form
      - slot_was_set:
          - sentiment: NEG
      - or:
        - intent: sobregeneralizacion
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
      - action: utter_ventilacion_2
      # - checkpoint: distorsion_ready

  - story: chatting distorsions - two steps
    steps:
      - checkpoint: user_give_emotion_NEG
      # - action: sentiment_form
      - slot_was_set:
          - sentiment: NEG
      - or:
        - intent: sobregeneralizacion
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
      - action: utter_ventilacion_1
      # - action: sentiment_form
      - slot_was_set:
          - sentiment: NEG
      - or:
        - intent: sobregeneralizacion
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
      - action: utter_ventilacion_2
      - checkpoint: distorsion_ready


### psicoeduc e intervencion primera

  - story: psicoeduc_sobre
    steps:
      - checkpoint: distorsion_ready
      - intent: sobregeneralizacion
      - action: utter_psicoeduc_general
      - action: utter_selector_psicoeduc_general
      - intent: confirm
      - action: utter_psicoeduc_sobre # definicion
      - action: utter_selector_psicoeduc_1 # quieres continuar
      - intent: confirm
      - action: utter_psicoeduc_sobre_2 # ejemplo concreto
      - action: utter_selector_psicoeduc_sobre_2 # te sientes identificado
      - or:
        - intent: confirm
        - intent: deny
      - action: utter_intervencion_sobregen


  - story: intervencion_etiquetado
    steps:
      - checkpoint: distorsion_ready
      - intent: etiquetado
      - action: utter_psicoeduc_general
      - action: utter_selector_psicoeduc_general
      - intent: confirm
      - action: utter_psicoeduc_etiquetado
      - action: utter_selector_psicoeduc_1
      - intent: confirm
      - action: utter_psicoeduc_etiquetado_2
      - action: utter_selector_psicoeduc_etiquetado_2
      - or:
        - intent: confirm
        - intent: deny
      - action: utter_intervencion_etiquetado

  - story: intervencion_lectordementes
    steps:
      - checkpoint: distorsion_ready
      - intent: lectordementes
      - action: utter_psicoeduc_general
      - action: utter_selector_psicoeduc_general
      - intent: confirm
      - action: utter_psicoeduc_lectordementes
      - action: utter_selector_psicoeduc_1
      - intent: confirm
      - action: utter_psicoeduc_lectordementes_2
      - action: utter_selector_psicoeduc_lectordementes_2
      - or:
        - intent: confirm
        - intent: deny
      - action: utter_intervencion_lectordementes

  - story: intervencion_adivinacion
    steps:
      - checkpoint: distorsion_ready
      - intent: adivinacion
      - action: utter_psicoeduc_general
      - action: utter_selector_psicoeduc_general
      - intent: confirm
      - action: utter_psicoeduc_adivinacion
      - action: utter_selector_psicoeduc_1
      - intent: confirm
      - action: utter_psicoeduc_adivinacion_2
      - action: utter_selector_psicoeduc_adivinacion_2
      - or:
        - intent: confirm
        - intent: deny
      - action: utter_intervencion_adivinacion

  - story: intervencion_deberias
    steps:
      - checkpoint: distorsion_ready
      - intent: deberias
      - action: utter_psicoeduc_general
      - action: utter_selector_psicoeduc_general
      - intent: confirm
      - action: utter_psicoeduc_deberias
      - action: utter_selector_psicoeduc_1
      - intent: confirm
      - action: utter_psicoeduc_deberias_2
      - action: utter_selector_psicoeduc_deberias_2
      - or:
        - intent: confirm
        - intent: deny
      - action: utter_intervencion_deberias

  - story: intervencion_catastrofismo
    steps:
      - checkpoint: distorsion_ready
      - intent: catastrofismo
      - action: utter_psicoeduc_general
      - action: utter_selector_psicoeduc_general
      - intent: confirm
      - action: utter_psicoeduc_catastrofismo
      - action: utter_selector_psicoeduc_1
      - intent: confirm
      - action: utter_psicoeduc_catastrofismo_2
      - action: utter_selector_psicoeduc_catastrofismo_2
      - or:
        - intent: confirm
        - intent: deny
      - action: utter_intervencion_catastrofismo

  - story: intervencion_pensamientoabsolutista
    steps:
      - checkpoint: distorsion_ready
      - intent: pensamientoabsolutista
      - action: utter_psicoeduc_general
      - action: utter_selector_psicoeduc_general
      - intent: confirm
      - action: utter_psicoeduc_pensamientoabsolutista
      - action: utter_selector_psicoeduc_1
      - intent: confirm
      - action: utter_psicoeduc_pensamientoabsolutista_2
      - action: utter_selector_psicoeduc_pensamientoabsolutista_2
      - or:
        - intent: confirm
        - intent: deny
      - action: utter_intervencion_pensamientoabsolutista


  - story: thanks  # revisado ok
    steps: 
      - intent: thanks
      - action: utter_thanks

  # - story: chatting distorsions - two steps
  #   steps:
  #     - checkpoint: user_give_emotion_NEU
  #     # - action: sentiment_form
  #     - slot_was_set:
  #         - sentiment: NEG
  #     - or:
  #       - intent: sobregeneralizacion
  #       - intent: lectordementes
  #       - intent: pensamientoabsolutista
  #       - intent: etiquetado
  #       - intent: catastrofismo
  #       - intent: adivinacion
  #       - intent: deberias
  #     - action: utter_ventilacion_1
  #     # - action: sentiment_form
  #     - slot_was_set:
  #         - sentiment: NEG
  #     - or:
  #       - intent: sobregeneralizacion
  #       - intent: lectordementes
  #       - intent: pensamientoabsolutista
  #       - intent: etiquetado
  #       - intent: catastrofismo
  #       - intent: adivinacion
  #       - intent: deberias
  #     - action: utter_ventilacion_2
  #     - checkpoint: distorsion_ready
