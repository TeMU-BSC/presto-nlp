version: "2.0"

stories:

# Transervsal stories

# Acabar la conversación

  - story: goodbye + confirm goodby
    steps:
      - intent: goodbye_nicemood
      - action: utter_confirm_goodby
      - intent: confirm_goodby
      - action: utter_goodbye_nicemood

  - story: goodbye + deny goodby
    steps:
      - intent: goodbye_nicemood
      - action: utter_confirm_goodby
      - intent: deny_goodby
      - action: utter_retrieval

# POS stories

  - story: Emotion 3 x POS contar
    steps:
      - intent: greet                       # hola
      - action: utter_greet_ask_emotion     # cómo estás hoy?
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado 
      - slot_was_set:
          - sentiment: POS                  # positivo
      - action: utter_sentiment_POS         # fantastico!
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado 
      - slot_was_set:
          - sentiment: POS                  # positivo
      - action: utter_sentiment_POS2         # fantastico!
      - action: utter_ask_tell_more_POS     # quieres contarme algo mas? (selector)
      - intent: confirm                     # sí o directamente 
      - action: utter_si_contar             # soy todo oidos
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado
      - slot_was_set:
          - sentiment: POS                  # positivo
      - action: utter_selector_POS_last     # quieres contarme algo mas o aprender emociones positivas?

  - story: Emotion 3 x POS deny 
    steps:
     - intent: greet                        # hola
     - action: utter_greet_ask_emotion      # cómo estás hoy?
     - or: 
       - intent: inform_sentiment
       - intent: nlu_fallback
       - intent: sobregeneralizacion
       - intent: etiquetado # rasa 3 con la condicion slot = pos y ya sino lista de intents + pos
     - slot_was_set:
        - sentiment: POS                    # positivo
     - action: utter_sentiment_POS         # fantastico!
     - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado 
     - slot_was_set:
        - sentiment: POS                  # positivo
     - action: utter_sentiment_POS2         # fantastico!
     - action: utter_ask_tell_more_POS      # quieres contarme algo mas? (selector)
     - intent: deny                         # no
     - action: utter_no_contar 
     - action: utter_selector_POS_last      # quieres contarme algo mas o aprender emociones positivas?
    
## variaciones POS / NEU
  - story: Emotion POS - POS - NEU contar
    steps:
      - intent: greet                       # hola
      - action: utter_greet_ask_emotion     # cómo estás hoy?
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado 
      - slot_was_set:
          - sentiment: POS                  # positivo
      - action: utter_sentiment_POS         # fantastico!
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado 
      - slot_was_set:
          - sentiment: POS                  # positivo
      - action: utter_sentiment_POS2         # fantastico!
      - action: utter_ask_tell_more_POS     # quieres contarme algo mas? (selector)
      - intent: confirm                     # sí o directamente 
      - action: utter_si_contar             # soy todo oidos
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado
      - slot_was_set:
          - sentiment: NEU                  # neutro
      - action: utter_selector_POS_last     # quieres contarme algo mas o aprender emociones positivas?

     
  - story: Emotion POS - NEU - POS contar
    steps:
      - intent: greet                       # hola
      - action: utter_greet_ask_emotion     # cómo estás hoy?
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado 
      - slot_was_set:
          - sentiment: POS                  # positivo
      - action: utter_sentiment_POS         # fantastico!
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado 
      - slot_was_set:
          - sentiment: NEU                  # neutro
      - action: utter_sentiment_NEU         # de acuerdo, me cuentas más?
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado
      - slot_was_set:
          - sentiment: POS                  # positivo
      - action: utter_selector_POS_last     # quieres contarme algo mas o aprender emociones positivas?

## advice POS

  - story: aprender emociones pos - útil
    steps:
      - action: utter_selector_POS_last     # quieres contarme algo mas o aprender emociones positivas?
      - intent: feedbackemotionpos          # aprender
      - action: utter_advice_POS            # explicación
      - action: utter_selector_feedback_advice   # te ha sido útil?
      - intent: confirmfb                   # sí
      - action: utter_positive_feedback     # despedida contenta
      - action: utter_retrieval             # algo más?
      
  - story: aprender emociones pos - no útil
    steps:
      - action: utter_selector_POS_last     # quieres contarme algo más o aprender emociones positivas?
      - intent: feedbackemotionpos          # aprender
      - action: utter_advice_POS            # explicación
      - action: utter_selector_feedback_advice   # te ha sido útil?
      - intent: denyfb                      # no
      - action: utter_negative_feedback     # sorry y visita nuestro web

## seguir conversación POS      
 
  - story: seguir conversación + Emotion 3 x POS contar
    steps:
      - or:
        - intent: retrieval_alert_intent
        - intent: confirmtalkpos              # contar más
        - intent: confirmtalkneg              # contar más
        - intent: confirm_retrieval              # contar más
      - action: utter_si_contar             # soy todo oídos
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado 
      - slot_was_set:
          - sentiment: POS                  # positivo
      - action: utter_sentiment_POS         # fantastico!
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado 
      - slot_was_set:
          - sentiment: POS                  # positivo
      - action: utter_sentiment_POS2         # fantastico!
      - action: utter_ask_tell_more_POS     # quieres contarme algo mas? (selector)
      - intent: confirm                     # sí o directamente 
      - action: utter_si_contar             # soy todo oidos
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado
      - slot_was_set:
          - sentiment: POS                  # positivo
      - action: utter_selector_POS_last     # quieres contarme algo mas o aprender emociones positivas?

  - story: seguir conversación POS + Emotion 3 x POS deny 
    steps:
      - or:
        - intent: retrieval_alert_intent
        - intent: confirmtalkpos              # contar más
        - intent: confirmtalkneg              # contar más
        - intent: confirm_retrieval              # contar más
      - action: utter_si_contar             # soy todo oídos
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado # rasa 3 con la condicion slot = pos y ya sino lista de intents + pos
      - slot_was_set:
        - sentiment: POS                    # positivo
      - action: utter_sentiment_POS         # fantastico!
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado 
      - slot_was_set:
        - sentiment: POS                  # positivo
      - action: utter_sentiment_POS2         # fantastico!
      - action: utter_ask_tell_more_POS      # quieres contarme algo mas? (selector)
      - intent: deny                         # no
      - action: utter_no_contar 
      - action: utter_selector_POS_last      # quieres contarme algo mas o aprender emociones positivas?
    
### variaciones POS / NEU
  - story: seguir conversación POS + Emotion POS - POS - NEU contar
    steps:
      - or:
        - intent: retrieval_alert_intent
        - intent: confirmtalkpos              # contar más
        - intent: confirmtalkneg              # contar más
        - intent: confirm_retrieval              # contar más
      - action: utter_si_contar             # soy todo oídos
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado 
      - slot_was_set:
          - sentiment: POS                  # positivo
      - action: utter_sentiment_POS         # fantastico!
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado 
      - slot_was_set:
          - sentiment: POS                  # positivo
      - action: utter_sentiment_POS2         # fantastico!
      - action: utter_ask_tell_more_POS     # quieres contarme algo mas? (selector)
      - intent: confirm                     # sí o directamente 
      - action: utter_si_contar             # soy todo oidos
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado
      - slot_was_set:
          - sentiment: NEU                  # neutro
      - action: utter_selector_POS_last     # quieres contarme algo mas o aprender emociones positivas?

     
  - story: seguir conversación POS + Emotion POS - NEU - POS contar
    steps:
      - or:
        - intent: retrieval_alert_intent
        - intent: confirmtalkpos              # contar más
        - intent: confirmtalkneg              # contar más
        - intent: confirm_retrieval              # contar más
      - action: utter_si_contar             # soy todo oídos
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado 
      - slot_was_set:
          - sentiment: POS                  # positivo
      - action: utter_sentiment_POS         # fantastico!
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado 
      - slot_was_set:
          - sentiment: NEU                  # neutro
      - action: utter_sentiment_NEU         # de acuerdo, me cuentas más?
      - or: 
        - intent: inform_sentiment
        - intent: nlu_fallback
        - intent: sobregeneralizacion
        - intent: etiquetado
      - slot_was_set:
          - sentiment: POS                  # positivo
      - action: utter_selector_POS_last     # quieres contarme algo mas o aprender emociones positivas?      
      
      
      
  - story: EmotionClassification - neutral emotion 
    steps:
      # - intent: greet
      # - action: utter_greet_ask_emotion
      - intent: inform_sentiment
      # - action: sentiment_form
      - slot_was_set:
          - sentiment: NEU
      - action: utter_sentiment_NEU

# NEG stories

  - story: EmotionClassification - 3 x NEG contar
    steps:
      - intent: greet                       # hola
      - action: utter_greet_ask_emotion     # qué tal estás?
      - or: 
        - intent: nlu_fallback
        - intent: inform_sentiment       
      - slot_was_set:
          - sentiment: NEG                  # mal
      - action: utter_sentiment_NEG         # lo siento, cuéntame más
      - or: 
        - intent: nlu_fallback
        - intent: inform_sentiment
      - slot_was_set:
        - sentiment: NEG                    # estoy mal
      - action: utter_selector_contar       # lo siento. quieres contarme más?
      - intent: confirmcontar               # sí 
      - action: utter_si_contar             # soy todo oídos
      - or:
        - intent: nlu_fallback
        - intent: inform_sentiment
      - slot_was_set:
        - sentiment: NEG                    # estoy mal
      - action: utter_selector_NEG_last     # contar más o feedback emoción negativa?
      # - checkpoint: user_give_emotion_NEG

  - story: Emotion 3 x NEG deny
    steps:
      - intent: greet                       # hola
      - action: utter_greet_ask_emotion     # qué tal estás?
      - or: 
        - intent: nlu_fallback
        - intent: inform_sentiment         
      - slot_was_set:
          - sentiment: NEG                  # mal
      - action: utter_sentiment_NEG         # lo siento, cuéntame más
      - or: 
        - intent: nlu_fallback
        - intent: inform_sentiment
      - slot_was_set:
        - sentiment: NEG                    # estoy mal
      - action: utter_selector_contar       # lo siento. quieres contarme más?
      - intent: denyContar                  # no
      - action: utter_no_contar             # no pasa nada
      - action: utter_selector_NEG_last    # contar más o feedback emoción negativa?

## variaciones NEG / NEU

  - story: Emotion NEG - NEG - NEU contar
    steps:
      - intent: greet                       # hola
      - action: utter_greet_ask_emotion     # qué tal estás?
      - or: 
        - intent: nlu_fallback
        - intent: inform_sentiment       
      - slot_was_set:
          - sentiment: NEG                  # mal
      - action: utter_sentiment_NEG         # lo siento, cuéntame más
      - or: 
        - intent: nlu_fallback
        - intent: inform_sentiment
      - slot_was_set:
        - sentiment: NEG                    # estoy mal
      - action: utter_selector_contar       # lo siento. quieres contarme más?
      - intent: confirmcontar               # sí 
      - action: utter_si_contar             # soy todo oídos
      - or:
        - intent: nlu_fallback
        - intent: inform_sentiment
      - slot_was_set:
        - sentiment: NEU                    # estoy mal
      - action: utter_selector_NEG_last     # contar más o feedback emoción negativa?
      # - checkpoint: user_give_emotion_NEG
      
  - story: Emotion NEG - NEU - NEG contar
    steps:
      - intent: greet                       # hola
      - action: utter_greet_ask_emotion     # qué tal estás?
      - or: 
        - intent: nlu_fallback
        - intent: inform_sentiment       
      - slot_was_set:
          - sentiment: NEG                  # mal
      - action: utter_sentiment_NEG         # lo siento, cuéntame más
      - or: 
        - intent: nlu_fallback
        - intent: inform_sentiment
      - slot_was_set:
        - sentiment: NEU                    # estoy mal
      - action: utter_sentiment_NEU         # soy todo oídos
      - or:
        - intent: nlu_fallback
        - intent: inform_sentiment
      - slot_was_set:
        - sentiment: NEG                    # estoy mal
      - action: utter_selector_NEG_last     # contar más o feedback emoción negativa?
      # - checkpoint: user_give_emotion_NEG  
      
## advice NEG
  - story: aprender emociones neg - útil
    steps:
      - action: utter_selector_NEG_last     # contar más o feedback emoción negativa?
      - intent: feedbackemotionneg          # aprender emociones negativas
      - action: utter_advice_NEG            # explicación
      - action: utter_selector_feedback_advice   # te ha sido útil?
      - intent: confirmfb                   # sí
      - action: utter_positive_feedback     # despedida contenta
      - action: utter_retrieval             # algo más?

  - story: aprender emociones neg - no útil
    steps:
      - action: utter_selector_NEG_last     # contar más o feedback emoción negativa?
      - intent: feedbackemotionneg          # aprender emociones negativas
      - action: utter_advice_NEG            # explicación
      - action: utter_selector_feedback_advice   # te ha sido útil?
      - intent: denyfb                      # no
      - action: utter_negative_feedback     # sorry y visita nuestro web
 
## seguir conversación NEG
  - story: seguir conversación NEG + 3 x NEG contar
    steps:
      - or:
        - intent: retrieval_alert_intent
        - intent: confirmtalkpos              # contar más
        - intent: confirmtalkneg              # contar más
        - intent: confirm_retrieval              # contar más
      - action: utter_si_contar             # soy todo oídos
      - or: 
        - intent: nlu_fallback
        - intent: inform_sentiment       
      - slot_was_set:
          - sentiment: NEG                  # mal
      - action: utter_sentiment_NEG         # lo siento, cuéntame más
      - or: 
        - intent: nlu_fallback
        - intent: inform_sentiment
      - slot_was_set:
        - sentiment: NEG                    # estoy mal
      - action: utter_selector_contar       # lo siento. quieres contarme más?
      - intent: confirmcontar               # sí 
      - action: utter_si_contar             # soy todo oídos
      - or:
        - intent: nlu_fallback
        - intent: inform_sentiment
      - slot_was_set:
        - sentiment: NEG                    # estoy mal
      - action: utter_selector_NEG_last     # contar más o feedback emoción negativa?
      # - checkpoint: user_give_emotion_NEG

  - story: seguir conversación NEG + 3 x NEG deny
    steps:
      - or:
        - intent: retrieval_alert_intent
        - intent: confirmtalkpos              # contar más
        - intent: confirmtalkneg              # contar más
        - intent: confirm_retrieval              # contar más
      - action: utter_si_contar             # soy todo oídos
      - or: 
        - intent: nlu_fallback
        - intent: inform_sentiment         
      - slot_was_set:
          - sentiment: NEG                  # mal
      - action: utter_sentiment_NEG         # lo siento, cuéntame más
      - or: 
        - intent: nlu_fallback
        - intent: inform_sentiment
      - slot_was_set:
        - sentiment: NEG                    # estoy mal
      - action: utter_selector_contar       # lo siento. quieres contarme más?
      - intent: denyContar                  # no
      - action: utter_no_contar             # no pasa nada
      - action: utter_selector_NEG_last    # contar más o feedback emoción negativa?

## variaciones NEG / NEU

  - story: seguir conversación NEG + NEG - NEG - NEU contar
    steps:
      - or:
        - intent: retrieval_alert_intent
        - intent: confirmtalkpos              # contar más
        - intent: confirmtalkneg              # contar más
        - intent: confirm_retrieval              # contar más
      - action: utter_si_contar             # soy todo oídos
      - or: 
        - intent: nlu_fallback
        - intent: inform_sentiment       
      - slot_was_set:
          - sentiment: NEG                  # mal
      - action: utter_sentiment_NEG         # lo siento, cuéntame más
      - or: 
        - intent: nlu_fallback
        - intent: inform_sentiment
      - slot_was_set:
        - sentiment: NEG                    # estoy mal
      - action: utter_selector_contar       # lo siento. quieres contarme más?
      - intent: confirmcontar               # sí 
      - action: utter_si_contar             # soy todo oídos
      - or:
        - intent: nlu_fallback
        - intent: inform_sentiment
      - slot_was_set:
        - sentiment: NEU                    # estoy mal
      - action: utter_selector_NEG_last     # contar más o feedback emoción negativa?
      # - checkpoint: user_give_emotion_NEG
      
  - story: seguir conversación NEG + NEG - NEU - NEG contar
    steps:
      - or:
        - intent: confirm_retrieval
        - intent: retrieval_alert_intent
        - intent: confirmtalkpos              # contar más
        - intent: confirmtalkneg              # contar más
        - intent: confirm_retrieval              # contar más
      - action: utter_si_contar             # soy todo oídos
      - or: 
        - intent: nlu_fallback
        - intent: inform_sentiment       
      - slot_was_set:
          - sentiment: NEG                  # mal
      - action: utter_sentiment_NEG         # lo siento, cuéntame más
      - or: 
        - intent: nlu_fallback
        - intent: inform_sentiment
      - slot_was_set:
        - sentiment: NEU                    # estoy mal
      - action: utter_sentiment_NEU         # soy todo oídos
      - or:
        - intent: nlu_fallback
        - intent: inform_sentiment
      - slot_was_set:
        - sentiment: NEG                    # estoy mal
      - action: utter_selector_NEG_last     # contar más o feedback emoción negativa?
      # - checkpoint: user_give_emotion_NEG  
      
#stories "començades"

  #- story: negative emotion parcial
    #steps:
      #- or: 
        #- intent: nlu_fallback
        #- intent: inform_sentiment         
      #- slot_was_set:
          #- sentiment: NEG                  # mal
      #- action: utter_sentiment_NEG         # lo siento, cuéntame más
      #- or: 
        #- intent: nlu_fallback
        #- intent: inform_sentiment
      #- slot_was_set:
        #- sentiment: NEG                    # estoy mal
      #- action: utter_selector_contar       # lo siento. quieres contarme más?

  #- story: positive emotion parcial 
    #steps:
      #- or: 
        #- intent: inform_sentiment
        #- intent: nlu_fallback
        #- intent: sobregeneralizacion
        #- intent: etiquetado 
      #- slot_was_set:
          #- sentiment: POS                  # positivo
      #- action: utter_sentiment_POS         # fantastico!
      
    #sigue contando

  #- story: keepontalking
    #steps:
      #- or: 
        #- intent: inform_sentiment
        #- intent: nlu_fallback
      #- action: utter_si_contar             # soy todo oidos

#---------------------------

### Distortions inquiries

  - story: chatting distorsions 
    steps:
      - intent: greet                       # hola
      - action: utter_greet_ask_emotion     # qué tal estás?
      - or:
        - intent: sobregeneralizacion       # distorsion o mal
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
        - intent: inform_sentiment   
        - intent: nlu_fallback 
      - slot_was_set:
        - sentiment: NEG                  
      - action: utter_sentiment_NEG         # lo lamento, cuéntame más
      - or:
        - intent: sobregeneralizacion       # distorsion 1
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
      # - slot_was_set:
      #     - sentiment: NEG
      - action: utter_flecha_descendiente_1         # sigue contando
      - or:
        - intent: sobregeneralizacion       # distorsion 2
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
      # - slot_was_set:
      #     - sentiment: NEG
      - action: utter_flecha_descendiente_2         # determinadas emociones son complicadas. Explícame más
      - checkpoint: distorsion_ready        # tenemos una distorsión
      
  - story: chatting distorsions 2
    steps:
      - intent: greet                       # hola
      - action: utter_greet_ask_emotion     # qué tal estás?
      - or:
        - intent: sobregeneralizacion       # distorsion 1
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
        - intent: inform_sentiment   
      - action: utter_sentiment_NEU         # cuéntame más
      - or:
        - intent: sobregeneralizacion       # distorsion o mal
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
        - intent: nlu_fallback 
      - slot_was_set:
        - sentiment: NEG            
      - action: utter_flecha_descendiente_1         # sigue contando
      - or:
        - intent: sobregeneralizacion       # distorsion 2
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
      - action: utter_flecha_descendiente_2         # determinadas emociones son complicadas. Explícame más
      - checkpoint: distorsion_ready        # tenemos una distorsión
    
    
  - story: chatting distorsions short
    steps:
      - action: utter_sentiment_NEG         # lo lamento, cuéntame más
      - or:
        - intent: sobregeneralizacion       # distorsion 1
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
      # - slot_was_set:
      #     - sentiment: NEG
      - action: utter_flecha_descendiente_1         # sigue contando
      - or:
        - intent: sobregeneralizacion       # distorsion 2
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
      # - slot_was_set:
      #     - sentiment: NEG
      - action: utter_flecha_descendiente_2         # determinadas emociones son complicadas. Explícame más
      - checkpoint: distorsion_ready        # tenemos una distorsión


### PSICOEDUCAT

  - story: psicoeduc_sobre + feedback ok
    steps:
      - checkpoint: distorsion_ready        # distorsion detectada
      - intent: sobregeneralizacion         # sobregeneralizacion
      - action: utter_psicoeduc_general     # explicación distorsion
      - action: utter_selector_psicoeduc_general    # quieres trabajarlo?
      - intent: confirmPsicoGen             # sí -- falta neg
      - action: utter_psicoeduc_sobre       # explicación sobre
      - action: utter_selector_psicoeduc_1  # quieres continuar
      - intent: confirmPsico1               # sí -- falta neg
      - action: utter_psicoeduc_sobre_2     # ejemplo concreto
      - action: utter_selector_psicoeduc_sobre_2    # te sientes identificado?
      - intent: confirmSobre
#      - action: utter_intervencion_sobregen # orientación al web
      - action: utter_intervencion_app_distorsiones
      
  - story: psicoeduc_sobre + feedback negativo
    steps:
      - checkpoint: distorsion_ready        # distorsion detectada
      - intent: sobregeneralizacion         # sobregeneralizacion
      - action: utter_psicoeduc_general     # explicación distorsion
      - action: utter_selector_psicoeduc_general    # quieres trabajarlo?
      - intent: confirmPsicoGen             # sí -- falta neg
      - action: utter_psicoeduc_sobre       # explicación sobre
      - action: utter_selector_psicoeduc_1  # quieres continuar
      - intent: confirmPsico1               # sí -- falta neg
      - action: utter_psicoeduc_sobre_2     # ejemplo concreto
      - action: utter_selector_psicoeduc_sobre_2    # te sientes identificado?
      - intent: denySobre
      - action: utter_intervencion_feedback_negativo # orientación al web
      - action: utter_intervencion_app_distorsiones

  - story: intervencion_etiquetado + feedback ok
    steps:
      - checkpoint: distorsion_ready        # distorsion detectada
      - intent: etiquetado                  # etiquetado
      - action: utter_psicoeduc_general     # explicación distorsion
      - action: utter_selector_psicoeduc_general    # quieres trabajarlo?
      - intent: confirmPsicoGen             # sí -- falta neg
      - action: utter_psicoeduc_etiquetado  # explicación etiquetado
      - action: utter_selector_psicoeduc_1  # quieres continuar
      - intent: confirmPsico1               # sí -- falta neg
      - action: utter_psicoeduc_etiquetado_2            # ejemplo concreto
      - action: utter_selector_psicoeduc_etiquetado_2   # te sientes identificado?
      - intent: confirm
#      - action: utter_intervencion_etiquetado   # orientación al web
      - action: utter_intervencion_app_distorsiones

  - story: intervencion_etiquetado + feedback negativo
    steps:
      - checkpoint: distorsion_ready        # distorsion detectada
      - intent: etiquetado                  # etiquetado
      - action: utter_psicoeduc_general     # explicación distorsion
      - action: utter_selector_psicoeduc_general    # quieres trabajarlo?
      - intent: confirmPsicoGen             # sí -- falta neg
      - action: utter_psicoeduc_etiquetado  # explicación etiquetado
      - action: utter_selector_psicoeduc_1  # quieres continuar
      - intent: confirmPsico1               # sí -- falta neg
      - action: utter_psicoeduc_etiquetado_2            # ejemplo concreto
      - action: utter_selector_psicoeduc_etiquetado_2   # te sientes identificado?
      - intent: deny
      - action: utter_intervencion_feedback_negativo   # orientación al web
      - action: utter_intervencion_app_distorsiones
      
  - story: intervencion_lectordementes + feedback ok
    steps:
      - checkpoint: distorsion_ready
      - intent: lectordementes
      - action: utter_psicoeduc_general
      - action: utter_selector_psicoeduc_general
      - intent: confirmPsicoGen
      - action: utter_psicoeduc_lectordementes
      - action: utter_selector_psicoeduc_1
      - intent: confirmPsico1
      - action: utter_psicoeduc_lectordementes_2
      - action: utter_selector_psicoeduc_lectordementes_2
      - intent: confirm
#      - action: utter_intervencion_lectordementes
      - action: utter_intervencion_app_distorsiones

  - story: intervencion_lectordementes + feedback negativo
    steps:
      - checkpoint: distorsion_ready
      - intent: lectordementes
      - action: utter_psicoeduc_general
      - action: utter_selector_psicoeduc_general
      - intent: confirmPsicoGen
      - action: utter_psicoeduc_lectordementes
      - action: utter_selector_psicoeduc_1
      - intent: confirmPsico1
      - action: utter_psicoeduc_lectordementes_2
      - action: utter_selector_psicoeduc_lectordementes_2
      - intent: deny
      - action: utter_intervencion_feedback_negativo
      - action: utter_intervencion_app_distorsiones

  - story: intervencion_adivinacion + feedback ok
    steps:
      - checkpoint: distorsion_ready
      - intent: adivinacion
      - action: utter_psicoeduc_general
      - action: utter_selector_psicoeduc_general
      - intent: confirmPsicoGen
      - action: utter_psicoeduc_adivinacion
      - action: utter_selector_psicoeduc_1
      - intent: confirmPsico1
      - action: utter_psicoeduc_adivinacion_2
      - action: utter_selector_psicoeduc_adivinacion_2
      - intent: confirm
 #     - action: utter_intervencion_adivinacion
      - action: utter_intervencion_app_distorsiones

  - story: intervencion_adivinacion + feedback negativo
    steps:
      - checkpoint: distorsion_ready
      - intent: adivinacion
      - action: utter_psicoeduc_general
      - action: utter_selector_psicoeduc_general
      - intent: confirmPsicoGen
      - action: utter_psicoeduc_adivinacion
      - action: utter_selector_psicoeduc_1
      - intent: confirmPsico1
      - action: utter_psicoeduc_adivinacion_2
      - action: utter_selector_psicoeduc_adivinacion_2
      - intent: deny
      - action: utter_intervencion_feedback_negativo
      - action: utter_intervencion_app_distorsiones

  - story: intervencion_deberias + feedback ok
    steps:
      - checkpoint: distorsion_ready
      - intent: deberias
      - action: utter_psicoeduc_general
      - action: utter_selector_psicoeduc_general
      - intent: confirmPsicoGen
      - action: utter_psicoeduc_deberias
      - action: utter_selector_psicoeduc_1
      - intent: confirmPsico1
      - action: utter_psicoeduc_deberias_2
      - action: utter_selector_psicoeduc_deberias_2
      - intent: confirm
#      - action: utter_intervencion_deberias
      - action: utter_intervencion_app_distorsiones

  - story: intervencion_deberias + feedback negativo
    steps:
      - checkpoint: distorsion_ready
      - intent: deberias
      - action: utter_psicoeduc_general
      - action: utter_selector_psicoeduc_general
      - intent: confirmPsicoGen
      - action: utter_psicoeduc_deberias
      - action: utter_selector_psicoeduc_1
      - intent: confirmPsico1
      - action: utter_psicoeduc_deberias_2
      - action: utter_selector_psicoeduc_deberias_2
      - intent: deny
      - action: utter_intervencion_feedback_negativo
      - action: utter_intervencion_app_distorsiones
      
  - story: intervencion_catastrofismo + feedback ok
    steps:
      - checkpoint: distorsion_ready
      - intent: catastrofismo
      - action: utter_psicoeduc_general
      - action: utter_selector_psicoeduc_general
      - intent: confirmPsicoGen
      - action: utter_psicoeduc_catastrofismo
      - action: utter_selector_psicoeduc_1
      - intent: confirmPsico1
      - action: utter_psicoeduc_catastrofismo_2
      - action: utter_selector_psicoeduc_catastrofismo_2
      - intent: confirm
#      - action: utter_intervencion_catastrofismo
      - action: utter_intervencion_app_distorsiones

  - story: intervencion_catastrofismo + feedback negativo
    steps:
      - checkpoint: distorsion_ready
      - intent: catastrofismo
      - action: utter_psicoeduc_general
      - action: utter_selector_psicoeduc_general
      - intent: confirmPsicoGen
      - action: utter_psicoeduc_catastrofismo
      - action: utter_selector_psicoeduc_1
      - intent: confirmPsico1
      - action: utter_psicoeduc_catastrofismo_2
      - action: utter_selector_psicoeduc_catastrofismo_2
      - intent: deny
      - action: utter_intervencion_feedback_negativo
      - action: utter_intervencion_app_distorsiones

  - story: intervencion_pensamientoabsolutista + feedback ok
    steps:
      - checkpoint: distorsion_ready
      - intent: pensamientoabsolutista
      - action: utter_psicoeduc_general
      - action: utter_selector_psicoeduc_general
      - intent: confirmPsicoGen
      - action: utter_psicoeduc_pensamientoabsolutista
      - action: utter_selector_psicoeduc_1
      - intent: confirmPsico1
      - action: utter_psicoeduc_pensamientoabsolutista_2
      - action: utter_selector_psicoeduc_pensamientoabsolutista_2
      - intent: confirm
 #     - action: utter_intervencion_pensamientoabsolutista
      - action: utter_intervencion_app_distorsiones

  - story: intervencion_pensamientoabsolutista + feedback negativo
    steps:
      - checkpoint: distorsion_ready
      - intent: pensamientoabsolutista
      - action: utter_psicoeduc_general
      - action: utter_selector_psicoeduc_general
      - intent: confirmPsicoGen
      - action: utter_psicoeduc_pensamientoabsolutista
      - action: utter_selector_psicoeduc_1
      - intent: confirmPsico1
      - action: utter_psicoeduc_pensamientoabsolutista_2
      - action: utter_selector_psicoeduc_pensamientoabsolutista_2
      - intent: deny
      - action: utter_intervencion_feedback_negativo
      - action: utter_intervencion_app_distorsiones

### se ha detectado distorsion pero el usuario no quiere continuar
  - story: no intervención
    steps:
      - action: utter_psicoeduc_general                 # explicación distorsion
      - action: utter_selector_psicoeduc_general        # quieres trabajarlo?
      - intent: denyPsicoGen                            # no
      - action: utter_denypsicoeduc                     # de acuerdo, consulta el web
      - action: utter_retrieval

  - story: no continuar
    steps:
      - action: utter_selector_psicoeduc_1              # quieres continuar?
      - intent: denyPsicoedu                            # no
      - action: utter_denypsicoeduc                     # de acuerdo, consulta el web
      - action: utter_retrieval
