version: "2.0"

stories:

# Emotion classification: 

  - story: EmotionClassification - positive emotion
    steps: 
      - intent: greet
      - action: utter_greet
      - intent: inform_sentiment
      - action: sentiment_form
      - slot_was_set:
          - sentiment: POS
      - action: utter_sentiment_POS

  - story: EmotionClassification - negative emotion
    steps: 
      - intent: greet 
      - action: utter_greet
      - intent: inform_sentiment
      - action: sentiment_form
      - slot_was_set:
          - sentiment: NEG
      - action: utter_sentiment_NEG
      - checkpoint: user_give_emotion_NEG

  - story: EmotionClassification - neutral emotion
    steps: 
      - intent: greet
      - action: utter_greet
      - intent: inform_sentiment
      - action: sentiment_form
      - slot_was_set:
          - sentiment: NEU
      - action: utter_sentiment_NEU

### Inquiries non distortions

  - story: non distorsion - negative emotion
    steps: 
      - checkpoint: user_give_emotion_NEG
      - intent: nlu_fallback
      - slot_was_set:
          - sentiment: NEG
      - action: utter_chitchat/something_curious
      - intent: nlu_fallback
      - slot_was_set:
          - sentiment: NEG
      - action: utter_chitchat/how_are_u
      - intent: nlu_fallback
      - slot_was_set:
          - sentiment: NEG
      - action: utter_chitchat/ask_name


  - story: non distorsion - positive emotion
    steps: 
      - checkpoint: user_give_emotion_NEG
      - intent: nlu_fallback
      - slot_was_set:
          - sentiment: POS
      - action: utter_chitchat/something_curious



### Distortions inquiries



  - story: chatting distorsions - two steps WITHOUT EMOTION INIT
    steps: 
      # - action: sentiment_form
      - slot_was_set:
          - sentiment: NEG
      - or:
        - intent: sobregeneralizacion
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
      - action: utter_ventilacion_1
      # - action: sentiment_form
      - slot_was_set:
          - sentiment: NEG
      - or:
        - intent: sobregeneralizacion
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
      - action: utter_ventilacion_2
      - checkpoint: distorsion_ready


  - story: chatting distorsions - two steps
    steps: 
      - checkpoint: user_give_emotion_NEG
      # - action: sentiment_form
      - slot_was_set:
          - sentiment: NEG
      - or:
        - intent: sobregeneralizacion
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
      - action: utter_ventilacion_1
      # - action: sentiment_form
      - slot_was_set:
          - sentiment: NEG
      - or:
        - intent: sobregeneralizacion
        - intent: lectordementes
        - intent: pensamientoabsolutista
        - intent: etiquetado
        - intent: catastrofismo
        - intent: adivinacion
        - intent: deberias
      - action: utter_ventilacion_2
      - checkpoint: distorsion_ready

### Interventions

  - story: intervencion_sobre
    steps:
      - checkpoint: distorsion_ready
      - intent: sobregeneralizacion
      - action: utter_intervencion_general
      - action: utter_intervencion_sobre

  - story: intervencion_etiquetado
    steps:
      - checkpoint: distorsion_ready
      - intent: etiquetado
      - action: utter_intervencion_general
      - action: utter_intervencion_etiquetado

  - story: intervencion_lectordementes
    steps:
      - checkpoint: distorsion_ready
      - intent: lectordementes
      - action: utter_intervencion_general
      - action: utter_intervencion_lectordementes

  - story: intervencion_adivinacion
    steps:
      - checkpoint: distorsion_ready
      - intent: adivinacion
      - action: utter_intervencion_general
      - action: utter_intervencion_adivinacion

  - story: intervencion_deberias
    steps:
      - checkpoint: distorsion_ready
      - intent: deberias
      - action: utter_intervencion_general
      - action: utter_intervencion_deberias

  - story: intervencion_catastrofismo
    steps:
      - checkpoint: distorsion_ready
      - intent: catastrofismo
      - action: utter_intervencion_general
      - action: utter_intervencion_catastrofismo

  - story: intervencion_pensamientoabsolutista
    steps:
      - checkpoint: distorsion_ready
      - intent: pensamientoabsolutista
      - action: utter_intervencion_general
      - action: utter_intervencion_pensamientoabsolutista

    
  # - story: end_intervention
  #   steps:
  #   - checkpoint: end_intervention
  #   - or:
  #       - intent: ready
  #       - intent: thanks
  #       - intent: confirm
  #   - action: utter_youre_welcome

  - story: alert_non_emergency
    steps: 
    - intent: alert
    - action: utter_alert
    - intent: inform_sentiment
    - action: utter_sentiment_NEG

  - story: alert_emergency
    steps: 
    - intent: alert
    - action: utter_alert
    - intent: emergency
    - action: utter_emergency




